#! /bin/bash

set -xe

#	Source APT commands as functions.
#	shellcheck source=/dev/null

source /configs/scripts/others/apt-funcs


add_repo_keys \
	55751E5D > /dev/null

cp /configs/files/sources/sources.list.neon.user /etc/apt/sources.list.d/neon-user-repo.list

update


NX_DESKTOP_PKG='
	nx-desktop-legacy
	nx-desktop-wayland-legacy
'

MISC_DESKTOP_PKGS='
	gstreamer1.0-pipewire
	inxi
	kwin-bismuth/trixie
	kwin-x11/jammy
	libpipewire-0.3-0
	libpipewire-0.3-common
	libpipewire-0.3-modules
	libspa-0.2-bluetooth
	libspa-0.2-jack
	libspa-0.2-modules
	overlayroot
	pipewire-bin
	pipewire-jack
	pipewire-pulse
	pipewire-v4l2
	plasma-workspace-wayland
	pulseaudio-equalizer-ladspa
	python3-gi
	samba
	smbclient
	wireplumber
'

DBGSYM_PACKAGES='
	kwin-common-dbgsym
	kwin-x11-dbgsym
	latte-dock-dbgsym
	libkwineffects14-dbgsym
	libkwinglutils14-dbgsym
	libqt5core5a-dbgsym
	libqt5dbus5-dbgsym
	libqt5gui5-dbgsym
	libqt5qml5-dbgsym
	libqt5quick5-dbgsym
	libqt5widgets5-dbgsym
	print-manager-dbgsym
	qml-module-org-kde-kwindowsystem-dbgsym
'

install_downgrades $NX_DESKTOP_PKG $MISC_DESKTOP_PKGS $DBGSYM_PACKAGES

rm \
	/etc/apt/sources.list.d/neon-user-repo.list

remove_repo_keys \
	55751E5D > /dev/null

update
